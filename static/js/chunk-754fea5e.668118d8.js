(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-754fea5e"],{"0c31":function(t,e,a){},"35b8":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7"),a("3ca3"),a("ddb0");function r(t,e,r){Promise.all([a.e("chunk-234ecc1b"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(a){a.export_json_to_excel({header:t,data:e,filename:r})}))}},"363a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-eqp-info-main-container"},[a("div",{staticClass:"head_container"},[a("el-row",[a("el-col",[a("div",{staticClass:"search-container filter-item"},[a("label",[t._v("设备名称")]),a("el-select",{staticStyle:{width:"400px"},attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"请选择设备名称"},model:{value:t.search.selectedEqpName,callback:function(e){t.$set(t.search,"selectedEqpName",e)},expression:"search.selectedEqpName"}},t._l(t.equipmentList,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.EqpName+"("+t.Workline+")",value:t.EqpName}})})),1),a("br"),a("label",[t._v("统计周期")]),a("el-select",{attrs:{placeholder:"请选择统计周期"},on:{change:t.setPeriodMode},model:{value:t.search.periodMode,callback:function(e){t.$set(t.search,"periodMode",e)},expression:"search.periodMode"}},t._l(t.periodModeArray,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),a("br"),a("label",[t._v("开始时间")]),a("el-date-picker",{attrs:{type:t.DateType,clearable:!1,placeholder:"选择日期时间",align:"right","picker-options":t.startPickerOptions},model:{value:t.search.startTime,callback:function(e){t.$set(t.search,"startTime",e)},expression:"search.startTime"}}),a("label",{staticStyle:{"margin-left":"10px"}},[t._v("结束时间")]),a("el-date-picker",{attrs:{type:t.DateType,clearable:!1,placeholder:"选择日期时间",align:"right","picker-options":t.endPickerOptions},model:{value:t.search.endTime,callback:function(e){t.$set(t.search,"endTime",e)},expression:"search.endTime"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleDraw}},[t._v(" 绘制 ")])],1)])],1)],1),a("div",{staticClass:"show-container"},[a("el-row",[a("el-col",{staticStyle:{"background-color":"#fff"}},[a("div",["everyHour"==t.search.periodMode?a("Activation-BarChart",{attrs:{data:t.actBarSrcData,config:t.actBarConfig}}):t._e(),"everyDay"==t.search.periodMode?a("Activation-BarChart",{attrs:{data:t.actBarSrcData,config:t.actBarConfig}}):t._e(),"everyMonth"==t.search.periodMode?a("Activation-BarChart",{attrs:{data:t.actBarSrcData,config:t.actBarConfig}}):t._e()],1)])],1)],1)])},i=[],n=(a("ac1f"),a("841c"),a("14d9"),a("7cb6")),o=a("71dc"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},c=[],l=(a("b0c0"),a("b680"),a("313e")),u=a("ed08"),d={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(u["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}},h=a("35b8");a("817d"),a("9fad");var p=2e3,f={mixins:[d],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"500px"},data:{type:Object,default:function(){return{eqpName:["测试"],xData:[1,2,3,4,5,6,7],yData:[2080,2032,4e3,3314,3690,6040,4820]}}},config:{type:Object,default:function(){return{title:"每日稼动率",dataClass:"everyDay",legendData:["稼动率(%)","累计值(%)"],valueLabelIsShow:!0}}}},data:function(){return{seriesData:[],chart:null}},watch:{data:{handler:function(t){this.chartSetOption()},deep:!0}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=l["init"](this.$el,"macarons"),this.chartSetOption()},chartSetOption:function(){if(0===this.data.xData.length)this.showNoDataOption();else{this.seriesData=[];for(var t=0;t<this.data.yData.length;t++){var e={name:this.data.eqpName[t],type:"line",data:this.data.yData[t]};this.seriesData.push(e)}this.setTwoDimHourDayMonthOption()}},showNoDataOption:function(){var t=this;this.chart.clear(),this.chart.setOption({title:{text:this.config.title,left:"center",top:10,textStyle:{fontWeight:"normal",color:"black",fontSize:"22",fontFamily:"Arial"}},graphic:{type:"text",left:"center",top:"50%",style:{text:"暂无数据",fontSize:"22",fontFamily:"Arial",fill:"#909399"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{top:"10%",itemWidth:44,itemHeight:22,textStyle:{fontSize:15}},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0,optionToContent:function(t){for(var e=t.xAxis[0].data,a=t.series,r='<table  border="1px" bordercolor="#e0dddd" cellspacing="0" style="width:100%;text-align:center"><tbody><tr><th style="padding:10px">时间</th>',i=0,n=a.length;i<n;i++)r+="<th>"+a[i].name+"</th>";r+="</tr>";for(var o=0,s=e.length;o<s;o++){var c=[];c.push(e[o]),r+="<tr><td>"+e[o]+"</td>";for(var l=0,u=a.length;l<u;l++)r+="<td>"+a[l].data[o]+"</td>",c.push(a[l].data[o])}return r+="</tbody></table>",r}},myExportToExcel:{show:!0,title:"导出Excel",icon:"path://M725.312 608.768V433.152c0-74.112-326.784 24.192-384 263.424 0 0-75.584 88-85.312 0 0 0 109.696-482.944 469.312-482.944V81.92s42.688-61.824 128 43.968L1024 301.44l-298.688 307.328zM128 433.152a43.392 43.392 0 0 0-42.688 43.968v351.232c0 24.256 19.072 43.904 42.688 43.904h725.312a43.328 43.328 0 0 0 42.688-43.904v-43.904c0-24.256 19.072-43.968 42.688-43.968 23.616 0 42.688 19.712 42.688 43.968v87.808C981.312 920.768 943.104 960 896 960H85.312C38.208 960 0 920.768 0 872.256V433.152c0-48.512 38.208-87.808 85.312-87.808H128c23.552 0 42.688 19.648 42.688 43.904A43.328 43.328 0 0 1 128 433.152z",onclick:function(e){var a=[],r=[];Object(h["a"])(a,r,t.$moment(new Date).format("YYYY-MM-DD HH:mm:ss")+"_稼动率")}},restore:{show:!0},saveAsImage:{show:!0},magicType:{type:["line","bar","stack"]}}},grid:{top:80,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.data.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1}},{type:"value",position:"right",alignTicks:!0,axisLine:{show:!1,lineStyle:{color:"red"}}}],series:[{name:this.config.legendData[0],type:"bar",stack:"vistors",barWidth:"60%",label:{show:this.config.valueLabelIsShow,position:"inside",color:"white",fontSize:12},animationDuration:p},{name:this.config.legendData[1],type:"line",yAxisIndex:1,animationDuration:p}],color:["#91CC75","#EE6666"]},!0)},setTwoDimHourDayMonthOption:function(){var t=this;this.chart.clear(),this.chart.setOption({title:{text:this.config.title,x:"center",top:10,textStyle:{fontWeight:"normal",color:"black",fontSize:"22",fontFamily:"Arial"}},tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(t){for(var e=t[0].name+"<br/>",a=0;a<t.length;a++)void 0!==t[a].data&&(e+=t[a].marker+t[a].seriesName+":&nbsp&nbsp&nbsp"+t[a].data.toFixed(2)+"%<br/>");return e}},legend:{top:"10%",itemWidth:44,itemHeight:22,textStyle:{fontSize:15}},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0,optionToContent:function(t){for(var e=t.xAxis[0].data,a=t.series,r='<table  border="1px" bordercolor="#e0dddd" cellspacing="0" style="width:100%;text-align:center"><tbody><tr><th style="padding:10px">时间</th>',i=0,n=a.length;i<n;i++)r+="<th>"+a[i].name+"</th>";r+="</tr>";for(var o=0,s=e.length;o<s;o++){var c=[];c.push(e[o]),r+="<tr><td>"+e[o]+"</td>";for(var l=0,u=a.length;l<u;l++)r+="<td>"+a[l].data[o]+"</td>",c.push(a[l].data[o])}return r+="</tbody></table>",r}},myExportToExcel:{show:!0,title:"导出Excel",icon:"path://M725.312 608.768V433.152c0-74.112-326.784 24.192-384 263.424 0 0-75.584 88-85.312 0 0 0 109.696-482.944 469.312-482.944V81.92s42.688-61.824 128 43.968L1024 301.44l-298.688 307.328zM128 433.152a43.392 43.392 0 0 0-42.688 43.968v351.232c0 24.256 19.072 43.904 42.688 43.904h725.312a43.328 43.328 0 0 0 42.688-43.904v-43.904c0-24.256 19.072-43.968 42.688-43.968 23.616 0 42.688 19.712 42.688 43.968v87.808C981.312 920.768 943.104 960 896 960H85.312C38.208 960 0 920.768 0 872.256V433.152c0-48.512 38.208-87.808 85.312-87.808H128c23.552 0 42.688 19.648 42.688 43.904A43.328 43.328 0 0 1 128 433.152z",onclick:function(e){var a=[],r=[];a.push("时间");for(var i=0;i<t.data.eqpName.length;i++)a.push(t.data.eqpName[i]);for(var n=0;n<t.data.xData.length;n++){var o=[];o.push(t.data.xData[n]);for(var s=0;s<t.data.yData.length;s++)o.push(t.data.yData[s][n]);r.push(o)}Object(h["a"])(a,r,t.$moment(new Date).format("YYYY-MM-DD HH:mm:ss")+"_稼动率")}},restore:{show:!0},saveAsImage:{show:!0},magicType:{type:["line","bar","stack"]}}},grid:{top:80,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.data.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1},axisLabel:{formatter:function(t,e){return t+"%"}}}],series:this.seriesData},!0)}}},m=f,g=a("2877"),v=Object(g["a"])(m,s,c,!1,null,null,null),b=v.exports,y={name:"AlarmInfo",components:{ActivationBarChart:b},data:function(){return{actBarConfig:null,search:{periodMode:"everyHour",selectedEqpName:[],startTime:new Date((new Date).toLocaleDateString()+" 00:00:00"),endTime:new Date((new Date).toLocaleDateString()+" 24:00:00")},actBarConfigArray:{everyHour:{title:"每小时稼动率",dataClass:"everyHour",legendData:["稼动率(%)","累计值(%)"],valueLabelIsShow:!0},everyDay:{title:"每日稼动率",dataClass:"everyDay",legendData:["稼动率(%)","累计值(%)"],valueLabelIsShow:!0},everyMonth:{title:"每月稼动率",dataClass:"everyMonth",legendData:["稼动率(%)","累计值(%)"],valueLabelIsShow:!0}},actBarSrcData:{eqpName:[],xData:[],yData:[],yAverageData:[],ySumData:[]},periodModeArray:[{label:"每小时",value:"everyHour"},{label:"每日",value:"everyDay"},{label:"每月",value:"everyMonth"}],equipmentList:null,DateType:"datetime",DateTypeArray:{everyHour:"datetime",everyDay:"date",everyMonth:"month"},equipStatusMode:{run:1,alarm:2,standby:3,stop:4},equipStatus:1,startPickerOptions:{shortcuts:[{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}},{text:"一个月前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",e)}},{text:"六个月前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-15552e6),t.$emit("pick",e)}}]},endPickerOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date;e.setTime(e.getTime()),t.$emit("pick",e)}}]}}},created:function(){this.actBarConfig=this.actBarConfigArray["everyHour"],null==this.equipmentList&&this.getTotalList()},mounted:function(){},beforeDestroy:function(){},methods:{setPeriodMode:function(){this.DateType=this.DateTypeArray[this.search.periodMode],this.barConfig=this.barConfigArray[this.search.periodMode],this.actBarConfig=this.actBarConfigArray[this.search.periodMode]},formateTime:function(t){var e=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",n=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+a+r+i+n+o},getTotalList:function(){var t=this;Object(n["c"])().then((function(e){t.equipmentList=e.data.items;var a=[];a.push(t.equipmentList[0].EqpName),t.search.selectedEqpName=a,t.handleDraw()}))},handleDraw:function(){var t=this;0!==this.search.selectedEqpName.length?null!=this.search.startTime&&null!=this.search.endTime?this.search.startTime>this.search.endTime?this.$notify.error({title:"错误",message:"时间设置错误! 开始时间不能大于结束时间"}):Object(o["e"])(this.search).then((function(e){if(t.actBarSrcData=e.data,0!==e.data.xData.length){t.actBarSrcData.xData.push("平均值"),t.actBarSrcData.xData.push("累计值");for(var a=0;a<t.actBarSrcData.yData.length;a++)t.actBarSrcData.yData[a].push(t.actBarSrcData.yAverageData[a]),t.actBarSrcData.yData[a].push(t.actBarSrcData.ySumData[a])}})):this.$notify.error({title:"错误",message:"开始时间和结束时间为空！"}):this.$notify.error({title:"错误",message:"未获取到设备名称，网络故障! 请重新刷新页面！"})}}},D=y,x=(a("ac38"),Object(g["a"])(D,r,i,!1,null,"2ec99074",null));e["default"]=x.exports},"71dc":function(t,e,a){"use strict";a.d(e,"j",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"n",(function(){return h})),a.d(e,"o",(function(){return p})),a.d(e,"b",(function(){return f})),a.d(e,"i",(function(){return m})),a.d(e,"p",(function(){return g})),a.d(e,"c",(function(){return v})),a.d(e,"a",(function(){return b})),a.d(e,"d",(function(){return y})),a.d(e,"m",(function(){return D})),a.d(e,"e",(function(){return x})),a.d(e,"k",(function(){return w})),a.d(e,"l",(function(){return S})),a.d(e,"f",(function(){return k})),a.d(e,"g",(function(){return C}));a("d3b7"),a("d9e2");var r=a("bc3a"),i=a.n(r),n=a("5c96"),o=a("4360"),s=a("5f87"),c=i.a.create({baseURL:"/inter",timeout:3e5});c.interceptors.request.use((function(t){return o["a"].getters.token&&Object(s["a"])()&&(t.headers["Authorization"]="Bearer "+Object(s["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(n["Message"])({message:e.message||"Error",type:"error",duration:5e3}),50008!==e.code&&50012!==e.code&&50014!==e.code||n["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(n["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}));var l=c;function u(){return l({url:"api/v1/equipments/status",method:"get"})}function d(){return l({url:"api/v1/database/status",method:"get"})}function h(){return l({url:"api/v1/database/status/settings",method:"get"})}function p(t){return l({url:"api/v1/database/status/settings/name",method:"get",params:t})}function f(t){return l({url:"api/v1/database/status/settings/name",method:"put",data:t})}function m(){return l({url:"api/v1/database/status/tables",method:"get"})}function g(){return l({url:"api/v1/database/status/tables/flush",method:"get"})}function v(t){return l({url:"api/v1/database/status/settings/timer",method:"put",data:t})}function b(t){return l({url:"api/v1/database/status/settings/paras",method:"put",data:t})}function y(t){return l({url:"api/v1/database/status/tables",method:"delete",params:t})}function D(t){return l({url:"api/v1/ip/status",method:"get",params:t})}function x(t){return l({url:"api/v1/equipments/status/activation",method:"get",params:t})}function w(t){return l({url:"api/v1/equipments/status/maintenance/hours",method:"get",params:t})}function S(t){return l({url:"api/v1/equipments/status/maintenance/list",method:"get",params:t})}function k(){return l({url:"/api/v1/equipments/status/72hours-energy",method:"get"})}function C(){return l({url:"/api/v1/equipments/status/72hours-qr-pass-rate",method:"get"})}},"7cb6":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return c}));var r=a("b4af");function i(t){return Object(r["a"])({url:"/api/v1/equipments/page",method:"get",params:t})}function n(){return Object(r["a"])({url:"/api/v1/equipments",method:"get"})}function o(t){return Object(r["a"])({url:"/api/v1/equipments",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/api/v1/equipments/"+t.Id,method:"put",data:t})}function c(t){return Object(r["a"])({url:"/api/v1/equipments/"+t.Id,method:"Delete",data:t})}},"9fad":function(t,e,a){var r,i,n;(function(o,s){i=[e,a("313e")],r=s,n="function"===typeof r?r.apply(e,i):r,void 0===n||(t.exports=n)})(0,(function(t,e){var a=function(t){"undefined"!==typeof console&&console&&console.error&&console.error(t)};if(e){var r=["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],i={color:r,title:{textStyle:{fontWeight:"normal"}},visualMap:{color:["#1790cf","#a2d4e6"]},toolbox:{iconStyle:{borderColor:"#06467c"}},tooltip:{backgroundColor:"rgba(0,0,0,0.6)"},dataZoom:{dataBackgroundColor:"#dedede",fillerColor:"rgba(154,217,247,0.2)",handleColor:"#005eaa"},timeline:{lineStyle:{color:"#005eaa"},controlStyle:{color:"#005eaa",borderColor:"#005eaa"}},candlestick:{itemStyle:{color:"#c12e34",color0:"#2b821d"},lineStyle:{width:1,color:"#c12e34",color0:"#2b821d"},areaStyle:{color:"#e6b600",color0:"#005eaa"}},graph:{itemStyle:{color:"#e6b600"},linkStyle:{color:"#005eaa"}},map:{itemStyle:{color:"#f2385a",borderColor:"#eee",areaColor:"#ddd"},areaStyle:{color:"#ddd"},label:{color:"#c12e34"}},gauge:{axisLine:{show:!0,lineStyle:{color:[[.2,"#2b821d"],[.8,"#005eaa"],[1,"#c12e34"]],width:5}},axisTick:{splitNumber:10,length:8,lineStyle:{color:"auto"}},axisLabel:{color:"auto"},splitLine:{length:12,lineStyle:{color:"auto"}},pointer:{length:"90%",width:3,color:"auto"},title:{color:"#333"},detail:{color:"auto"}}};e.registerTheme("shine",i)}else a("ECharts is not Loaded")}))},ac38:function(t,e,a){"use strict";a("0c31")}}]);