(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3eda0455"],{"07ac":function(e,t,a){var n=a("23e7"),i=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},"372d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("label",{staticClass:"labelstyle"},[e._v("数据库部署：")]),a("el-button",{attrs:{loading:e.initialDBLoading,type:"primary",icon:"el-icon-circle-check"},on:{click:e.handleInitialDB}},[e._v(" "+e._s(e.$t("table.initialDB"))+" ")]),a("label",{staticClass:"labelstyle",staticStyle:{"margin-left":"10px"}},[e._v("硅片流入流出线别：")]),a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"请选择统计的线别"},model:{value:e.selectedWorkLine,callback:function(t){e.selectedWorkLine=t},expression:"selectedWorkLine"}},e._l(e.workLineList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1),a("br"),a("label",{staticClass:"labelstyle"},[e._v("配置信息")]),a("el-tooltip",{attrs:{content:"输入破片ID，多个ID，用空格分割",placement:"top",effect:"light"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"多个ID，用空格分割",clearable:""},model:{value:e.brokenAlarmId,callback:function(t){e.brokenAlarmId=t},expression:"brokenAlarmId"}})],1),a("el-tooltip",{attrs:{content:"输入异常片ID，多个ID，用空格分割",placement:"top",effect:"light"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"多个ID，用空格分割",clearable:""},model:{value:e.rejectAlarmId,callback:function(t){e.rejectAlarmId=t},expression:"rejectAlarmId"}})],1),a("el-tooltip",{attrs:{content:"输入丢片ID，多个ID，用空格分割",placement:"top",effect:"light"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"多个ID，用空格分割",clearable:""},model:{value:e.dropAlarmId,callback:function(t){e.dropAlarmId=t},expression:"dropAlarmId"}})],1),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.isOldSilkScreenLine,callback:function(t){e.isOldSilkScreenLine=t},expression:"isOldSilkScreenLine"}},[e._v("老版本丝网整线")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.configSettingInfo}},[e._v(" 写入 ")]),a("br"),a("label",{staticClass:"labelstyle"},[e._v("数据库表信息查询：")]),a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择表占用空间大小的界限值，标红显示"},model:{value:e.dataSize,callback:function(t){e.dataSize=t},expression:"dataSize"}},e._l(e.dataSizeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleGetDBTablesInfo}},[e._v(" "+e._s(e.$t("table.getDBTables"))+" ")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.flushDBTablesInfo}},[e._v(" "+e._s(e.$t("table.flushDBTables"))+" ")]),a("br"),a("label",{staticClass:"labelstyle"},[e._v("数据库表中数据的保留时间：")]),a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择表中记录过期时间，每天自动删除"},model:{value:e.expirationTime,callback:function(t){e.expirationTime=t},expression:"expirationTime"}},e._l(e.timeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-text":"启用定时清理数据任务","active-color":"#13ce66"},on:{change:e.timerHandleSwitch},model:{value:e.dbDeleteOldDataEnable,callback:function(t){e.dbDeleteOldDataEnable=t},expression:"dbDeleteOldDataEnable"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-text":"时间同步","active-color":"#13ce66"},on:{change:e.timeSyncSwitch},model:{value:e.timeSync,callback:function(t){e.timeSync=t},expression:"timeSync"}}),a("br"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","font-size":"15px"},attrs:{"element-loading-text":"数据正在加载中，请等候...",height:"600",data:e.showList,border:"",fit:"","highlight-current-row":"","row-style":{height:"20px"},"header-cell-style":{textAlign:"center",height:"20px"},size:"mini","cell-style":{padding:"0px"},"row-class-name":e.setRowClass}},[a("el-table-column",{key:"1",attrs:{label:"数据库名称",prop:"DatabaseName","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.DatabaseName))])]}}])}),a("el-table-column",{key:"2",attrs:{label:"表名称",prop:"TableName","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tooltip",{attrs:{content:"点击删除对应表中数据",placement:"top",effect:"light","hide-after":2500,"open-delay":500}},[a("el-tag",{staticClass:"link-type",on:{click:function(t){return e.handleTable(n)}}},[e._v(e._s(n.TableName))])],1)]}}])}),a("el-table-column",{key:"3",attrs:{label:"占用空间(M)",prop:"TableSize","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.TableSize))])]}}])}),a("el-table-column",{key:"4",attrs:{label:"记录总数(条)",prop:"RowsCount","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.RowsCount))])]}}])}),a("el-table-column",{key:"5",attrs:{label:"记录初始日期",prop:"MinDateTime","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(null==n.MinDateTime?"--":e.$moment(n.MinDateTime).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{key:"6",attrs:{label:"记录最新日期",prop:"MaxDateTime","min-width":"28%",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(null==n.MaxDateTime?"--":e.$moment(n.MaxDateTime).format("YYYY-MM-DD HH:mm:ss")))])]}}])})],1),a("el-dialog",{staticStyle:{"min-width":"500px"},attrs:{title:"删除表数据",visible:e.dialogFormVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"70%","margin-left":"50px"},attrs:{model:e.temp,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"数据库名称",prop:"DatabaseName"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.temp.DatabaseName,callback:function(t){e.$set(e.temp,"DatabaseName",t)},expression:"temp.DatabaseName"}})],1),a("el-form-item",{attrs:{label:"表名称",prop:"TableName"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.temp.TableName,callback:function(t){e.$set(e.temp,"TableName",t)},expression:"temp.TableName"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"Workline"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择"},model:{value:e.temp.StartTime,callback:function(t){e.$set(e.temp,"StartTime",t)},expression:"temp.StartTime"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"DateTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择"},model:{value:e.temp.EndTime,callback:function(t){e.$set(e.temp,"EndTime",t)},expression:"temp.EndTime"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("label",{staticStyle:{"margin-right":"100px"}},[e._v(e._s(e.handleProcessTip))]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteData()}}},[e._v(" 删除 ")])],1)],1),a("el-dialog",{attrs:{visible:e.timeSyncDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.timeSyncDialogVisible=t}}},[a("div",{staticStyle:{"vertical-align":"middle"},attrs:{slot:"title"},slot:"title"},[a("svg-icon",{staticStyle:{width:"40px",height:"40px","vertical-align":"middle"},attrs:{"icon-class":"notice"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("注意")])],1),a("span",[e._v("正在时间同步过程中，勿关闭此页面，请耐心等待...")])])],1)])},i=[],l=(a("d3b7"),a("159b"),a("14d9"),a("b64b"),a("07ac"),a("a15b"),a("71dc")),r=a("7cb6"),o=a("5c96"),s=new WebSocket("ws://127.0.0.1:3000");s.onopen=function(e){console.log("WebSocket服务器连接成功！")},s.onclose=function(e){console.log("WebSocket服务器关闭")},s.onerror=function(){console.log("WebSocket服务器连接失败！")},s.onmessage=function(e){console.log(e.data);var t=e.data.split("|");if(t.length>=3){var a=t[0],n=t[1],i=t[2],l=t[3];switch(a){case"Web":switch(n){case"InitDB":"200"===i?Object(o["Notification"])({title:l,message:"执行成功",type:"success",duration:5e3}):Object(o["Notification"])({title:l,message:"执行失败",type:"error",duration:1e4});break;default:Object(o["Notification"])({title:"未定义event："+n,message:l,type:"error",duration:1e4});break}break;default:Object(o["Notification"])({title:"未定义user："+a,message:l,type:"error",duration:1e4});break}}},s.con;var c,u,d,m=s,b="darkblue-row",p={name:"",components:{},data:function(){return{selectedWorkLine:[],workLineList:[],brokenAlarmId:"",rejectAlarmId:"",dropAlarmId:"",initialDBLoading:!1,listLoading:!0,showList:[],temp:{DatabaseName:null,TableName:null,StartTime:null,EndTime:null},queryTemp:{DatabaseName:null,TableName:null,StartTime:null,EndTime:null},dialogFormVisible:!1,timeSyncDialogVisible:!1,dataSizeOptions:[{label:"标红-大于200M",value:200},{label:"标红-大于500M",value:500},{label:"标红-大于1GM",value:1024},{label:"标红-大于2G",value:2048}],dataSize:500,timeOptions:[{label:"半个月",value:15},{label:"一个月",value:30},{label:"二个月",value:60},{label:"三个月",value:90},{label:"半年",value:182},{label:"一年",value:365},{label:"二年",value:730}],expirationTime:90,dbDeleteOldDataEnable:!1,handleProcessTip:"",isOldSilkScreenLine:!1,timeSync:!1,timeSyncTimer:void 0}},created:function(){this.handleGetDBTablesInfo()},mounted:function(){},methods:{handleInitialDB:function(){var e=this;this.initialDBLoading=!0,m.send("初始化数据库"),Object(l["h"])().then((function(t){e.initialDBLoading=!1,e.$alert(t.data,"初始化数据库")})).catch((function(t){console.log(t),e.initialDBLoading=!1}))},handleGetDBTablesInfo:function(){var e=this;Object(l["n"])().then((function(t){null!=t.data&&(e.dbDeleteOldDataEnable=t.data.dbDeleteOldDataEnable,e.expirationTime=t.data.expirationTime,e.isOldSilkScreenLine=t.data.isOldSilkScreenLine,e.brokenAlarmId=t.data.brokenAlarmId,e.rejectAlarmId=t.data.rejectAlarmId,e.dropAlarmId=t.data.dropAlarmId,e.timeSync=t.data.timeSync,t.data.waferInOutWorkline.split(",").forEach((function(t){e.selectedWorkLine.push(t)})))})),Object(r["c"])().then((function(t){var a=t.data.items;a.forEach((function(t){-1===e.workLineList.indexOf(t.Workline)&&e.workLineList.push(t.Workline)}))})),this.listLoading=!0,Object(l["i"])().then((function(t){e.showList=t.data,e.listLoading=!1})).catch((function(e){console.log(e)})).finally((function(){e.listLoading=!1}))},flushDBTablesInfo:function(){var e=this;Object(l["p"])().then((function(t){e.$notify({title:"表数据刷新成功，请重新点击查询",message:"执行成功",type:"success",duration:3e3})})).catch((function(e){console.log(e)}))},setRowClass:function(e){var t=e.row,a=e.rowIndex,n=parseInt(t.TableSize);return""===t.DatabaseName?n>=this.dataSize?"lightblue-row-red":"lightblue-row-black":(0===a&&(c=d,u=b),c===t.DatabaseName?"lightblue-row"===u?n>=this.dataSize?"lightblue-row-red":"lightblue-row-black":n>=this.dataSize?"darkblue-row-red":"darkblue-row-black":(c=t.DatabaseName,"lightblue-row"===u?(u="darkblue-row",0===a&&(d=t.DatabaseName,b="darkblue-row"),n>=this.dataSize?"darkblue-row-red":"darkblue-row-black"):(0===a&&(d=t.DatabaseName,b="lightblue-row"),u="lightblue-row",n>=this.dataSize?"lightblue-row-red":"lightblue-row-black")))},handleTable:function(e){this.handleProcessTip="",this.temp.DatabaseName=e.DatabaseName,this.temp.TableName=e.TableName,this.temp.StartTime=e.MinDateTime,this.temp.EndTime=e.MaxDateTime,this.dialogFormVisible=!0},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},deleteData:function(){var e=this;this.queryTemp=Object.assign({},this.temp),this.queryTemp.StartTime=this.$moment(this.temp.StartTime).format("YYYY-MM-DD HH:mm:ss"),this.queryTemp.EndTime=this.$moment(this.temp.EndTime).format("YYYY-MM-DD HH:mm:ss"),this.$confirm("确认要删除表数据吗？").then((function(t){e.handleProcessTip="正在删除中，请耐心等待......",Object(l["d"])(e.queryTemp).then((function(t){e.handleProcessTip="",t.data?(e.$notify({title:"删除表数据",message:"执行成功",type:"success",duration:3e3}),e.dialogFormVisible=!1):e.$notify({title:"删除表数据",message:"执行失败",type:"error",duration:3e3})}))})).catch((function(e){}))},timerHandleSwitch:function(){var e=this;this.dbDeleteOldDataEnable?this.$confirm("确认需要开启定时清理数据任务吗？").then((function(t){e.configDeleteOldDataTimer()})).catch((function(t){e.dbDeleteOldDataEnable=!1})):this.$confirm("确认需要关闭定时清理数据任务吗？").then((function(t){e.configDeleteOldDataTimer()})).catch((function(t){e.dbDeleteOldDataEnable=!0}))},timeSyncSwitch:function(){var e=this;this.timeSync?this.$confirm("确认需要开始同步设备时间吗？").then((function(t){e.configTimeSync(!0)})).catch((function(t){e.timeSync=!1})):this.$confirm("确认需要结束同步设备时间吗？").then((function(t){e.configTimeSync(!1)})).catch((function(t){e.timeSync=!0}))},configDeleteOldDataTimer:function(){var e=this,t={dbDeleteOldDataEnable:this.dbDeleteOldDataEnable,expirationTime:this.expirationTime};Object(l["c"])(t).then((function(t){if(0===Object.keys(t.data).length)e.$notify({title:"参数未更新",message:"执行成功",type:"success",duration:3e3});else for(var a=function(a){setTimeout((function(){Object.values(t.data)[a]?e.$notify({title:"设置定时清理任务"+Object.keys(t.data)[a],message:"执行成功",type:"success",duration:3e3}):e.$notify({title:"设置定时清理任务"+Object.keys(t.data)[a],message:"执行失败",type:"error",duration:3e3})}),200)},n=0;n<Object.keys(t.data).length;n++)a(n)}))},configTimeSync:function(e){var t=this,a={timeSync:e};Object(l["b"])(a).then((function(a){if(a.data)if(e){t.timeSyncDialogVisible=!0;var n=0;t.timeSyncTimer&&clearInterval(t.timeSyncTimer),t.timeSyncTimer=setInterval((function(){n++,n<120?t.fetchTimeSyncValue():(t.timeSyncDialogVisible=!1,t.$notify({title:"同步超时",message:"同步超时2min",type:"error",duration:3e3}),t.timeSyncTimer&&clearInterval(t.timeSyncTimer))}),1e3)}else t.$notify({title:"时间同步",message:"关闭成功",type:"success",duration:3e3});else t.$notify({title:"时间同步",message:"开启失败",type:"error",duration:3e3})}))},fetchTimeSyncValue:function(){var e=this,t={name:"timeSync"};Object(l["o"])(t).then((function(t){e.timeSync=JSON.parse(t.data.toLowerCase()),"false"===t.data.toLowerCase()&&(e.timeSyncTimer&&clearInterval(e.timeSyncTimer),e.timeSyncDialogVisible=!1,e.$notify({title:"时间同步",message:"同步完成",type:"success",duration:3e3}))}))},configSettingInfo:function(){var e=this,t={isOldSilkScreenLine:this.isOldSilkScreenLine,brokenAlarmId:this.brokenAlarmId,rejectAlarmId:this.rejectAlarmId,dropAlarmId:this.dropAlarmId,waferInOutWorkline:this.selectedWorkLine.join(",")};Object(l["a"])(t).then((function(t){if(0===Object.keys(t.data).length)e.$notify({title:"参数未更新",message:"执行成功",type:"success",duration:3e3});else for(var a=function(a){setTimeout((function(){Object.values(t.data)[a]?e.$notify({title:"修改参数"+Object.keys(t.data)[a],message:"执行成功",type:"success",duration:3e3}):e.$notify({title:"修改参数"+Object.keys(t.data)[a],message:"执行失败",type:"error",duration:3e3})}),200)},n=0;n<Object.keys(t.data).length;n++)a(n)}))}}},f=p,h=(a("41be"),a("2877")),g=Object(h["a"])(f,n,i,!1,null,"4a9b8980",null);t["default"]=g.exports},"41be":function(e,t,a){"use strict";a("c768")},"6f53":function(e,t,a){var n=a("83ab"),i=a("e330"),l=a("df75"),r=a("fc6a"),o=a("d1e7").f,s=i(o),c=i([].push),u=function(e){return function(t){var a,i=r(t),o=l(i),u=o.length,d=0,m=[];while(u>d)a=o[d++],n&&!s(i,a)||c(m,e?[a,i[a]]:i[a]);return m}};e.exports={entries:u(!0),values:u(!1)}},"71dc":function(e,t,a){"use strict";a.d(t,"j",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"n",(function(){return m})),a.d(t,"o",(function(){return b})),a.d(t,"b",(function(){return p})),a.d(t,"i",(function(){return f})),a.d(t,"p",(function(){return h})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return y})),a.d(t,"d",(function(){return v})),a.d(t,"m",(function(){return S})),a.d(t,"e",(function(){return k})),a.d(t,"k",(function(){return D})),a.d(t,"l",(function(){return T})),a.d(t,"f",(function(){return w})),a.d(t,"g",(function(){return O}));a("d3b7"),a("d9e2");var n=a("bc3a"),i=a.n(n),l=a("5c96"),r=a("4360"),o=a("5f87"),s=i.a.create({baseURL:"/inter",timeout:3e5});s.interceptors.request.use((function(e){return r["a"].getters.token&&Object(o["a"])()&&(e.headers["Authorization"]="Bearer "+Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(l["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||l["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(l["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var c=s;function u(){return c({url:"api/v1/equipments/status",method:"get"})}function d(){return c({url:"api/v1/database/status",method:"get"})}function m(){return c({url:"api/v1/database/status/settings",method:"get"})}function b(e){return c({url:"api/v1/database/status/settings/name",method:"get",params:e})}function p(e){return c({url:"api/v1/database/status/settings/name",method:"put",data:e})}function f(){return c({url:"api/v1/database/status/tables",method:"get"})}function h(){return c({url:"api/v1/database/status/tables/flush",method:"get"})}function g(e){return c({url:"api/v1/database/status/settings/timer",method:"put",data:e})}function y(e){return c({url:"api/v1/database/status/settings/paras",method:"put",data:e})}function v(e){return c({url:"api/v1/database/status/tables",method:"delete",params:e})}function S(e){return c({url:"api/v1/ip/status",method:"get",params:e})}function k(e){return c({url:"api/v1/equipments/status/activation",method:"get",params:e})}function D(e){return c({url:"api/v1/equipments/status/maintenance/hours",method:"get",params:e})}function T(e){return c({url:"api/v1/equipments/status/maintenance/list",method:"get",params:e})}function w(){return c({url:"/api/v1/equipments/status/72hours-energy",method:"get"})}function O(){return c({url:"/api/v1/equipments/status/72hours-qr-pass-rate",method:"get"})}},"7cb6":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a("b4af");function i(e){return Object(n["a"])({url:"/api/v1/equipments/page",method:"get",params:e})}function l(){return Object(n["a"])({url:"/api/v1/equipments",method:"get"})}function r(e){return Object(n["a"])({url:"/api/v1/equipments",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/api/v1/equipments/"+e.Id,method:"put",data:e})}function s(e){return Object(n["a"])({url:"/api/v1/equipments/"+e.Id,method:"Delete",data:e})}},c768:function(e,t,a){}}]);